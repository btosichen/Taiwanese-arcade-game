<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Little Mary Arcade - Ê≠°Ê®ÇÂ∞èÁë™Ëéâ</title>
    <style>
        /* --- CSS STYLES --- */
        :root {
            /* Ê¥ªÊΩëÈÖçËâ≤ÔºöÁ≥ñÊûúËâ≤Á≥ª */
            --bg-gradient: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%); /* ËñÑËç∑ËóçÊº∏Â±§ */
            --cabinet-bg: #ffffff;
            --cabinet-border: #ff9ff3; /* Á≤âÁ¥ÖËâ≤ÈÇäÊ°Ü */
            --board-bg: #ffeaa7; /* ÈµùÈªÉËâ≤Â∫ïÊùø */
            --slot-bg: #ffffff;
            --slot-border: #fab1a0;
            --led-on-bg: #ff7675; /* ÈÅ∏‰∏≠ÊôÇÁöÑÈ°èËâ≤(Á¥Ö) */
            --led-on-border: #d63031;
            --text-color: #2d3436;
            
            --btn-shadow: rgba(0, 0, 0, 0.15);
        }

        body {
            background: var(--bg-gradient);
            color: var(--text-color);
            font-family: 'Varela Round', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; /* ÂúìÊΩ§Â≠óÈ´î */
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            margin: 0;
            user-select: none;
            padding: 10px;
        }

        /* Game Cabinet Container */
        .cabinet {
            background-color: var(--cabinet-bg);
            border: 8px solid var(--cabinet-border);
            border-radius: 25px;
            padding: 20px;
            width: 95%;
            max-width: 600px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2); /* ÊüîÂíåÈô∞ÂΩ± */
            position: relative;
        }

        /* Header / Scoreboard */
        .scoreboard {
            display: flex;
            justify-content: space-between;
            background: #74b9ff; /* Â§©Á©∫Ëóç */
            border: none;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 15px;
            color: white;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
        }

        .score-box {
            text-align: center;
            width: 30%;
            background: rgba(255,255,255,0.2);
            border-radius: 10px;
            padding: 5px;
        }

        .score-label {
            font-size: 0.9rem;
            color: #f0f0f0;
            margin-bottom: 4px;
            font-weight: bold;
            text-transform: uppercase;
        }

        .score-value {
            font-size: 1.5rem;
            font-weight: 900;
            color: #ffffff;
            text-shadow: 1px 1px 0px rgba(0,0,0,0.2);
        }

        #win-display { color: #ffeaa7; }

        /* Main Board - The Loop */
        .game-board {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            grid-template-rows: repeat(7, 1fr);
            gap: 6px;
            aspect-ratio: 1/1;
            background-color: var(--board-bg);
            padding: 10px;
            border-radius: 20px;
            margin-bottom: 20px;
            border: 4px solid #fab1a0;
        }

        .slot {
            background-color: var(--slot-bg);
            border-radius: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            position: relative;
            border: 3px solid var(--slot-border);
            transition: all 0.1s;
            box-shadow: 0 3px 0 rgba(0,0,0,0.05);
            color: #333;
        }

        .slot.active {
            background-color: var(--led-on-bg);
            border-color: var(--led-on-border);
            box-shadow: 0 0 15px var(--led-on-bg), 0 5px 0 rgba(0,0,0,0.2);
            transform: scale(1.1);
            z-index: 10;
            color: white;
        }
        
        .slot.active .mult { color: #ffeaa7; font-weight: bold; }

        .slot span.icon { font-size: 1.6rem; line-height: 1.2; }
        .slot span.mult { font-size: 0.7rem; color: #888; margin-top: 2px; font-weight: bold; }

        /* Center Panel (Inside the loop) */
        .center-panel {
            grid-column: 2 / span 5;
            grid-row: 2 / span 5;
            background: #ffffff;
            border-radius: 15px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 10px;
            border: 4px dashed #fab1a0; /* ËôõÁ∑öÊ°Ü */
        }

        .center-title {
            font-size: 1.8rem;
            font-weight: 900;
            color: #ff7675;
            margin-bottom: 10px;
            text-shadow: 2px 2px 0 #ffeaa7;
            font-family: 'Arial Rounded MT Bold', 'Varela Round', sans-serif;
        }

        .message-log {
            font-size: 1rem;
            color: #636e72;
            min-height: 50px;
            background: #f1f2f6;
            width: 90%;
            padding: 10px;
            border-radius: 10px;
            font-weight: bold;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Control Panel */
        .controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        /* Betting Buttons */
        .bet-panel {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            background: #ffeaa7;
            padding: 15px;
            border-radius: 15px;
            border: 2px solid #fdcb6e;
        }

        .bet-btn {
            background: linear-gradient(to bottom, #fdcb6e, #e1b12c); /* Ê©òÈªÉËâ≤ */
            border: none;
            border-radius: 12px;
            padding: 8px 2px;
            color: white;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 5px 0 #b78d16;
            transition: transform 0.1s;
        }

        .bet-btn:active {
            transform: translateY(5px);
            box-shadow: 0 0 0 #b78d16;
        }

        .bet-btn .bet-icon { font-size: 1.4rem; filter: drop-shadow(1px 1px 0 rgba(0,0,0,0.1)); }
        .bet-btn .bet-amount { 
            font-size: 0.9rem; 
            color: #636e72; 
            background: #fff; 
            padding: 2px 8px; 
            border-radius: 10px; 
            margin-top: 4px;
            font-weight: 900;
            min-width: 20px;
        }

        /* Main Action Buttons */
        .action-row {
            display: flex;
            gap: 12px;
            height: 60px;
        }

        .btn-action {
            border: none;
            border-radius: 15px;
            font-weight: 900;
            color: white;
            cursor: pointer;
            flex: 1;
            text-transform: uppercase;
            box-shadow: 0 6px 0 rgba(0,0,0,0.15);
            transition: transform 0.1s;
            font-size: 1.1rem;
        }

        .btn-action:active { transform: translateY(6px); box-shadow: none; }

        .btn-red { background: #ff7675; box-shadow: 0 6px 0 #d63031; } /* Á≤âÁ¥Ö/Á¥Ö */
        .btn-green { background: #55efc4; box-shadow: 0 6px 0 #00b894; color: #006266; } /* ËñÑËç∑Á∂† */
        .btn-blue { background: #74b9ff; box-shadow: 0 6px 0 #0984e3; flex: 2; font-size: 1.4rem;} /* ËóçËâ≤ */

        /* Double Up Modal */
        #double-modal {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(255, 255, 255, 0.95); /* ÂçäÈÄèÊòéÁôΩ */
            display: none; /* Hidden by default */
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            border-radius: 20px;
        }

        .modal-content {
            text-align: center;
            color: #2d3436;
            width: 80%;
        }
        
        .modal-content h2 {
            color: #6c5ce7;
            font-size: 2rem;
            margin: 0;
        }

        .big-number {
            font-size: 6rem;
            font-weight: 900;
            color: #0984e3;
            margin: 10px 0;
            min-height: 120px;
            background: #dfe6e9;
            border-radius: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .double-btns {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .d-btn {
            padding: 15px 20px;
            font-size: 1.2rem;
            border: none;
            cursor: pointer;
            border-radius: 15px;
            font-weight: bold;
            flex: 1;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
            transition: transform 0.1s;
        }
        
        .d-btn:active { transform: translateY(5px); box-shadow: none; }

        @media (max-width: 400px) {
            .cabinet { padding: 10px; width: 95%; border-width: 5px; }
            .slot span.icon { font-size: 1.1rem; }
            .score-value { font-size: 1.2rem; }
            .action-row { height: 50px; }
            .btn-action { font-size: 0.9rem; }
            .center-title { font-size: 1.4rem; }
        }
    </style>
</head>
<body>

    <!-- Game Information Comment Block -->
    <!-- 
        ÈÅäÊà≤Ë¶èÂâá / Game Rules:
        1. 1 Credit = 10 NTD (Simulated).
        2. Betting: Use orange buttons to bet on specific symbols.
        3. Payout: If the light stops on your symbol, Win = Bet * Multiplier.
        
        Multipliers / ÂÄçÁéáË°®:
        - Apple / ËòãÊûú: 5x
        - Orange / Ê©òÂ≠ê: 10x
        - Bell / ÈáëÈêò: 10x
        - Lemon / Ê™∏Ê™¨: 15x
        - Star / ÊòüÊòü: 15x
        - Watermelon / Ë•øÁìú: 20x
        - 77: 20x
        - BAR: 100x (Highest / ÊúÄÈ´ò)

        Double or Nothing / ÊØîÂ§ßÂ∞è:
        - Range 1-10.
        - Small (Â∞è): 1-5
        - Big (Â§ß): 6-10
        - Win: Prize x 2
        - Lose: Prize = 0
    -->

    <div class="cabinet">
        
        <!-- Header -->
        <div class="scoreboard">
            <div class="score-box">
                <div class="score-label">CREDIT ÈªûÊï∏</div>
                <div class="score-value" id="credit-display">500</div>
            </div>
            <div class="score-box">
                <div class="score-label">BET ÊäºÂàÜ</div>
                <div class="score-value" id="bet-display">0</div>
            </div>
            <div class="score-box">
                <div class="score-label">WIN ÂæóÂàÜ</div>
                <div class="score-value" id="win-display">0</div>
            </div>
        </div>

        <!-- Board -->
        <div class="game-board" id="board">
            <!-- Generated by JS -->
            <div class="center-panel">
                <div class="center-title">Ê≠°Ê®ÇÂ∞èÁë™Ëéâ<br><span style="font-size:0.5em; color:#a4b0be;">HAPPY MARY</span></div>
                <div class="message-log" id="message-log">Ê≠°ËøéÈÅäÁé©ÔºÅË´ã‰∏ãÊ≥®<br>Welcome</div>
            </div>
        </div>

        <!-- Controls -->
        <div class="controls">
            <!-- Symbol Betting Buttons -->
            <div class="bet-panel" id="bet-panel">
                <!-- Generated by JS -->
            </div>

            <!-- Game Actions -->
            <div class="action-row">
                <button class="btn-action btn-red" onclick="clearBet()">Ê∏ÖÈô§<br><span style="font-size:0.6em">Clear</span></button>
                <button class="btn-action btn-green" onclick="maxBet()">ÂÖ®Êäº<br><span style="font-size:0.6em">Max</span></button>
                <button class="btn-action btn-blue" id="start-btn" onclick="startGame()">ÈñãÂßãÈÅäÊà≤<br><span style="font-size:0.6em">START</span></button>
            </div>
        </div>

        <!-- Double Up Modal -->
        <div id="double-modal">
            <div class="modal-content">
                <h2>ÊØîÂ§ßÂ∞èÔºÅ</h2>
                <p style="font-size: 1.2rem;">ÁõÆÂâçÁçéÈáë: <span id="double-current-win" style="color:#ff7675; font-weight:bold;">0</span></p>
                <div class="big-number" id="double-number">?</div>
                <p id="double-result-text" style="font-weight: bold; color:#636e72;">ÁåúÂ§ßÊàñÁåúÂ∞èÔºü</p>
                
                <div class="double-btns" id="double-controls">
                    <button class="d-btn" style="background:#74b9ff; color:white;" onclick="playDouble('small')">Â∞è SMALL<br>(1-5)</button>
                    <button class="d-btn" style="background:#ff7675; color:white;" onclick="playDouble('big')">Â§ß BIG<br>(6-10)</button>
                </div>
                <div class="double-btns" style="justify-content: center;">
                     <button class="d-btn" style="background:#55efc4; color:#006266; width: 100%; box-shadow: 0 5px 0 #00b894;" onclick="takeWin()">Êî∂‰∏ãÁçéÈáë<br>TAKE WIN</button>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- GAME DATA CONFIGURATION ---
        const symbolTypes = {
            'bar':    { name: 'BAR', mult: 100, icon: 'üíé', label: 'BAR' },
            'seven':  { name: '77', mult: 20, icon: '7Ô∏è‚É£', label: '77' },
            'star':   { name: 'Star', mult: 15, icon: '‚≠ê', label: 'Êòü' },
            'water':  { name: 'Watermelon', mult: 20, icon: 'üçâ', label: 'Ë•øÁìú' },
            'lemon':  { name: 'Lemon', mult: 15, icon: 'üçã', label: 'Ê™∏Ê™¨' },
            'bell':   { name: 'Bell', mult: 10, icon: 'üîî', label: 'Èêò' },
            'orange': { name: 'Orange', mult: 10, icon: 'üçä', label: 'Ê©ò' },
            'apple':  { name: 'Apple', mult: 5, icon: 'üçé', label: 'Ëòã' }
        };

        const boardMap = [
            'orange', 'bell', 'bar', 'bell', 'orange', 'apple', 'apple', // 0-6 (Top)
            'lemon', 'seven', 'water', 'star', 'apple',             // 7-11 (Right)
            'orange', 'bell', 'lemon', 'apple', 'star', 'water', 'seven', // 12-18 (Bottom)
            'lemon', 'bell', 'orange', 'apple', 'apple'             // 19-23 (Left)
        ];

        const finalBoard = boardMap.slice(0, 24);

        // --- STATE VARIABLES ---
        let credits = 500;
        let currentBets = {}; 
        let totalBet = 0;
        let currentWin = 0;
        let isSpinning = false;
        let activeIndex = 0; 
        let audioCtx = null;

        Object.keys(symbolTypes).forEach(k => currentBets[k] = 0);

        // --- DOM ELEMENTS ---
        const boardEl = document.getElementById('board');
        const betPanelEl = document.getElementById('bet-panel');
        const creditEl = document.getElementById('credit-display');
        const betEl = document.getElementById('bet-display');
        const winEl = document.getElementById('win-display');
        const msgEl = document.getElementById('message-log');
        const doubleModal = document.getElementById('double-modal');

        // --- INITIALIZATION ---
        function init() {
            renderBoard();
            renderBetButtons();
            updateUI();
        }

        function renderBoard() {
            const posMap = [
                {r:1, c:1}, {r:1, c:2}, {r:1, c:3}, {r:1, c:4}, {r:1, c:5}, {r:1, c:6}, {r:1, c:7}, 
                {r:2, c:7}, {r:3, c:7}, {r:4, c:7}, {r:5, c:7}, {r:6, c:7}, 
                {r:7, c:7}, {r:7, c:6}, {r:7, c:5}, {r:7, c:4}, {r:7, c:3}, {r:7, c:2}, {r:7, c:1}, 
                {r:6, c:1}, {r:5, c:1}, {r:4, c:1}, {r:3, c:1}, {r:2, c:1} 
            ];

            finalBoard.forEach((key, index) => {
                const item = symbolTypes[key];
                const div = document.createElement('div');
                div.className = 'slot';
                div.id = `slot-${index}`;
                div.style.gridRow = posMap[index].r;
                div.style.gridColumn = posMap[index].c;
                
                div.innerHTML = `
                    <span class="icon">${item.icon}</span>
                    <span class="mult">x${item.mult}</span>
                `;
                boardEl.appendChild(div);
            });
        }

        function renderBetButtons() {
            const order = ['apple', 'orange', 'lemon', 'bell', 'star', 'water', 'seven', 'bar'];
            
            order.forEach(key => {
                const item = symbolTypes[key];
                const btn = document.createElement('button');
                btn.className = 'bet-btn';
                btn.id = `btn-${key}`;
                btn.onclick = () => placeBet(key);
                btn.innerHTML = `
                    <span class="bet-icon">${item.icon}</span>
                    <span class="bet-label" style="font-size:0.6rem">${item.label}</span>
                    <span class="bet-amount" id="bet-val-${key}">0</span>
                `;
                betPanelEl.appendChild(btn);
            });
        }

        // --- AUDIO SYSTEM (Web Audio API) ---
        function initAudio() {
            if (!audioCtx) audioCtx = new (window.AudioContext || window.webkitAudioContext)();
        }

        function playSound(type) {
            if (!audioCtx) initAudio();
            if (audioCtx.state === 'suspended') audioCtx.resume();

            const osc = audioCtx.createOscillator();
            const gain = audioCtx.createGain();
            osc.connect(gain);
            gain.connect(audioCtx.destination);

            const now = audioCtx.currentTime;

            if (type === 'tick') {
                osc.type = 'square';
                osc.frequency.setValueAtTime(800, now);
                osc.frequency.exponentialRampToValueAtTime(100, now + 0.03);
                gain.gain.setValueAtTime(0.05, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.03);
                osc.start(now);
                osc.stop(now + 0.03);
            } else if (type === 'bet') {
                osc.type = 'sine';
                osc.frequency.setValueAtTime(1200, now);
                osc.frequency.exponentialRampToValueAtTime(600, now + 0.1);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.1);
                osc.start(now);
                osc.stop(now + 0.1);
            } else if (type === 'start') {
                osc.type = 'square';
                osc.frequency.setValueAtTime(220, now);
                osc.frequency.linearRampToValueAtTime(880, now + 0.2);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.2);
                osc.start(now);
                osc.stop(now + 0.2);
            } else if (type === 'clear') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(300, now);
                osc.frequency.linearRampToValueAtTime(50, now + 0.15);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.15);
                osc.start(now);
                osc.stop(now + 0.15);
            } else if (type === 'win') {
                osc.type = 'triangle';
                osc.frequency.setValueAtTime(523.25, now); 
                osc.frequency.setValueAtTime(659.25, now + 0.1); 
                osc.frequency.setValueAtTime(783.99, now + 0.2); 
                osc.frequency.setValueAtTime(1046.50, now + 0.3); 
                
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0.1, now + 0.4);
                gain.gain.linearRampToValueAtTime(0, now + 0.6);
                osc.start(now);
                osc.stop(now + 0.6);
            } else if (type === 'lose') {
                osc.type = 'sawtooth';
                osc.frequency.setValueAtTime(200, now);
                osc.frequency.linearRampToValueAtTime(50, now + 0.3);
                gain.gain.setValueAtTime(0.1, now);
                gain.gain.linearRampToValueAtTime(0, now + 0.3);
                osc.start(now);
                osc.stop(now + 0.3);
            }
        }

        // --- GAME LOGIC ---

        function updateUI() {
            creditEl.textContent = credits;
            betEl.textContent = totalBet;
            winEl.textContent = currentWin;

            Object.keys(currentBets).forEach(key => {
                const el = document.getElementById(`bet-val-${key}`);
                if (el) el.textContent = currentBets[key];
            });
        }

        function placeBet(key) {
            if (isSpinning) return;
            if (credits > 0) {
                credits--;
                currentBets[key]++;
                totalBet++;
                updateUI();
                playSound('bet');
            } else {
                log("ÈªûÊï∏‰∏çË∂≥ÔºÅ<br>No Credits");
            }
        }

        function clearBet() {
            if (isSpinning) return;
            if (totalBet === 0) return;
            credits += totalBet;
            totalBet = 0;
            Object.keys(currentBets).forEach(k => currentBets[k] = 0);
            updateUI();
            playSound('clear');
            log("‰∏ãÊ≥®Â∑≤Ê∏ÖÈô§<br>Cleared");
        }

        function maxBet() {
            if (isSpinning) return;
            clearBet();
            const strategy = ['apple', 'orange', 'bell', 'lemon', 'star', 'water', 'seven', 'bar'];
            let added = 0;
            while (added < 10 && credits > 0) {
                 for (let s of strategy) {
                     if (credits > 0 && added < 10) {
                         credits--;
                         currentBets[s]++;
                         totalBet++;
                         added++;
                     }
                 }
            }
            updateUI();
            playSound('bet');
        }

        function log(text) {
            msgEl.innerHTML = text;
        }

        function startGame() {
            if (isSpinning) return;
            if (totalBet === 0) {
                log("Ë´ãÂÖà‰∏ãÊ≥®ÔºÅ<br>Bet First");
                return;
            }
            
            playSound('start');
            isSpinning = true;
            currentWin = 0;
            updateUI();
            log("Ë∑ëÁáà‰∏≠...<br>Spinning!");
            
            let speed = 50; 
            const targetIndex = Math.floor(Math.random() * finalBoard.length);
            let stepCount = 0;
            
            function step() {
                document.getElementById(`slot-${activeIndex}`).classList.remove('active');
                activeIndex = (activeIndex + 1) % finalBoard.length;
                document.getElementById(`slot-${activeIndex}`).classList.add('active');
                playSound('tick');

                stepCount++;

                if (stepCount < 50) {
                    speed = 40;
                } else if (stepCount < 80) {
                    speed += 5;
                } else if (stepCount < 90) {
                    speed += 15;
                } else {
                    speed += 30;
                }

                if (speed > 300 && stepCount > 60) {
                     finishSpin();
                     return;
                }
                
                setTimeout(step, speed);
            }
            step();
        }

        function finishSpin() {
            isSpinning = false;
            const symbolKey = finalBoard[activeIndex];
            const symbolData = symbolTypes[symbolKey];
            const betAmount = currentBets[symbolKey];
            const winAmount = betAmount * symbolData.mult;
            
            if (winAmount > 0) {
                currentWin = winAmount;
                playSound('win');
                log(`<span style="color:#d63031">‰∏≠Áçé! ${symbolData.label} x${symbolData.mult}</span><br>Ë¥èÂæó: ${winAmount}`);
                updateUI();
                setTimeout(() => {
                    openDoubleModal();
                }, 1500);
            } else {
                log(`ÁµêÊûú: ${symbolData.label}<br>Ê≤í‰∏≠ÔºåÂÜçË©¶‰∏ÄÊ¨°`);
            }
        }

        // --- DOUBLE UP LOGIC ---
        function openDoubleModal() {
            doubleModal.style.display = "flex";
            document.getElementById('double-current-win').textContent = currentWin;
            document.getElementById('double-number').textContent = "?";
            document.getElementById('double-result-text').textContent = "ÁåúÂ§ßÊàñÁåúÂ∞èÔºü";
            document.getElementById('double-controls').style.display = 'flex';
        }

        function takeWin() {
            credits += currentWin;
            currentWin = 0;
            totalBet = 0;
            Object.keys(currentBets).forEach(k => currentBets[k] = 0);
            
            doubleModal.style.display = "none";
            updateUI();
            playSound('bet');
            log("ÁçéÈáëÂ∑≤ÂÖ•Â∏≥ÔºÅ<br>Winner");
        }

        function playDouble(choice) {
            const controls = document.getElementById('double-controls');
            controls.style.display = 'none';
            const numDisplay = document.getElementById('double-number');
            
            let ticks = 0;
            const timer = setInterval(() => {
                numDisplay.textContent = Math.floor(Math.random() * 10) + 1;
                playSound('tick');
                ticks++;
                if(ticks > 10) {
                    clearInterval(timer);
                    resolveDouble(choice);
                }
            }, 100);
        }

        function resolveDouble(choice) {
            const result = Math.floor(Math.random() * 10) + 1;
            document.getElementById('double-number').textContent = result;
            
            const isSmall = result <= 5;
            const isBig = result >= 6;
            
            let won = false;
            if (choice === 'small' && isSmall) won = true;
            if (choice === 'big' && isBig) won = true;
            
            if (won) {
                currentWin = currentWin * 2;
                document.getElementById('double-current-win').textContent = currentWin;
                document.getElementById('double-result-text').textContent = "ÁåúÂ∞ç‰∫ÜÔºÅÁçéÈáëÁøªÂÄçÔºÅ";
                playSound('win');
                document.getElementById('double-controls').style.display = 'flex';
            } else {
                currentWin = 0;
                playSound('lose');
                document.getElementById('double-result-text').textContent = "ÁåúÈåØ‰∫ÜÔºåÁçéÈáëÊ≠∏Èõ∂...";
                
                setTimeout(() => {
                    doubleModal.style.display = "none";
                    credits += currentWin;
                    totalBet = 0;
                    Object.keys(currentBets).forEach(k => currentBets[k] = 0);
                    updateUI();
                    log("ÈÅäÊà≤ÁµêÊùü");
                }, 2000);
            }
        }

        init();
    </script>
</body>
</html>
